<div style="min-height:100vh ; margin-bottom: 150px ;">
  <mat-accordion class="accordion">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title class="creation">
          Création
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="main-container row-cols-7">
        <form *ngIf="!loading" [formGroup]="foodForm">
          <div class="row col-12">
            <mat-form-field class="title">
              <input matInput type="text" placeholder="Nom" autocomplete="Off" formControlName="nameControl"
                maxlength="255" />
            </mat-form-field>
          </div>

          <div class="row col-12">
            <mat-form-field class="description">
              <textarea class="text" matInput type="textarea" placeholder="Description" autocomplete="Off"
                formControlName="descriptionControl" maxlength="1000"></textarea>
            </mat-form-field>
          </div>

          <div class="row col-8">
            <div class="col-md-6 col-sm-12">
              <mat-form-field>
                <mat-label>Type</mat-label>
                <mat-select formControlName="typeControl">
                  <mat-option *ngFor="let type of allTypes" [value]="type">
                    {{type.typeName}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-6 col-sm-12" style="padding-top: 45px">
              <app-auto-complete (addElement)="getAllergenId($event)" [arrayPromise]="allergenPromise"
                [myControl]="allergenControl" [creation]="true" [nameField]="true" [title]="title"
                [service]="allergenService"></app-auto-complete>
            </div>
          </div>
          <div class="row" style=" display: flex; justify-content: center">
            <button *ngFor="let allergen of allergenNames;" mat-flat-button class="allergens-btn" color="primary"
              (click)="removeAllergen(allergen)">{{allergen}}</button>
          </div>

          <div class="row">
            <div class="check-container">
              <mat-checkbox (change)="toglle($event)" formControlName="displayControl">Ajouter à la carte</mat-checkbox>
            </div>
          </div>

          <div>
            <button mat-flat-button class="save" [disabled]="foodForm.invalid" (click)="save()">envoyer</button>
          </div>

        </form>
      </div>

    </mat-expansion-panel>
  </mat-accordion>
  <div class="list-container container-fluid" *ngIf="!loading">
    <h1>La carte</h1>
    <div class="container-type" *ngFor="let type of allTypes">
      <h3 class="type-title">{{type.typeName}}</h3>
      <div class="line"></div>
      <div *ngFor="let food of sortFoods(type.foods) ">
        <app-food-row [food]="food" (editData)="getFood()"></app-food-row>
      </div>
    </div>
  </div>
</div>